<%# app/views/admin/budget_questions/_form.html.erb %>
<%# Local variables available: budget_question, budget %>

<% if !budget_question.new_record? %>
  <div style="border: 2px solid red; padding: 10px; margin-bottom: 15px;">
    <p><strong>DEBUGGING OUTPUT:</strong></p>
    <p>budget object: <%= budget.inspect %></p>
    <p>budget.to_param: <%= budget.to_param.inspect %></p>
    <p>budget_question object: <%= budget_question.inspect %></p>
    <p>budget_question.id: <%= budget_question.id.inspect %></p>
    <p>budget_question.to_param: <%= budget_question.to_param.inspect %></p>
    <%= path_generated_for_update = admin_budget_budget_question_path(budget, budget_question) %>
    <p>Path generated by admin_budget_budget_question_path: <strong><%= path_generated_for_update.inspect %></strong></p>
    <p>form url to pass: <strong><%= admin_budget_budget_question_path(budget, budget_question) %></strong></p>
  </div>
<% end %>


<%
  # Determine the correct URL for the form based on whether it's a new or existing record.
  if budget_question.new_record?
                       form_url_to_pass= admin_budget_budget_questions_path(budget) # POST to create
                     else
                       form_url_to_pass=admin_budget_budget_question_path(budget, budget_question) # PATCH to update
                     end
%>

<%# Render your new Form Component, passing the necessary arguments %>
<%= render Admin::BudgetQuestions::FormComponent.new(
      budget_question: budget_question,
      budget: budget,
      form_url: form_url_to_pass
    ) %>

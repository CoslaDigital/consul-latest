<% provide(:title) do %>
  <%= t("admin.header.title") %> - <%= t("admin.events.index.calendar_title", default: "Events Calendar") %>
<% end %>

<div class="calendar-container">

  <%# --- HEADER SECTION --- %>
  <div class="clearfix mb-4">

    <%# 1. Admin Header Buttons (Floated Right) %>
    <% if current_user&.administrator? %>
      <div class="float-right">
        <%= link_to t("admin.events.index.view_list", default: "View List"),
                    admin_events_path,
                    class: "button secondary hollow",
                    style: "margin-right: 0.5rem;" %>

        <%= link_to t("admin.events.index.new_event"),
                    new_admin_event_path,
                    class: "button success" %>
      </div>
    <% end %>

    <%# 2. Page Title %>
    <h2 class="h3"><%= t("admin.events.index.calendar_title", default: "Events Calendar") %></h2>
  </div>

  <%# --- CALENDAR GRID --- %>
  <%= month_calendar(events: @calendar_items, attribute: :calendar_start, start_date: @start_date) do |date, items| %>

    <div class="day-number"><%= date.day %></div>

    <% items.each do |item| %>
      <div class="event-bar <%= item.calendar_class %>">

        <%# Event Title Link %>
        <%= link_to item.calendar_title,
                    item.calendar_link_url,
                    class: "event-link text-white text-truncate",
                    title: item.calendar_title %>

      </div>
    <% end %>

  <% end %>
</div>
